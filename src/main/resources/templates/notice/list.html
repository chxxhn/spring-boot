<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div th:fragment="content">
        <h2>공지게시판</h2>

        <!--    추후 기능 구현-->
        <form th:action="@{/notice}" method="get" style="margin-bottom: 20px;">
            <input type="text" name="keyword" placeholder="검색어를 입력하세요" />
            <button type="submit">검색</button>
        </form>

        <div th:if="${#authorization.expression('hasAuthority(''ROLE_ADMIN'')')}">
            <a th:href="@{/notice/add}">
                <button type="button">공지 추가</button>
            </a>
        </div>

        <a th:href="@{/}">
            <button type="button">홈으로 돌아가기</button>
        </a>

        <table border="1">
            <thead>
            <tr>
                <th>ID</th>
                <th>제목</th>
                <th>작성자</th>
                <th>작성일</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="notice, stat : ${noticePage.content}"
                th:onclick="|window.location.href='/notice/${notice.id}'|"
                style="cursor: pointer;">
                <td th:text="${stat.index + 1 + noticePage.number * noticePage.size}"></td>
                <td th:text="${notice.title}"></td>
                <td th:text="${notice.user.username}"></td>
                <td>
                    <span th:text="${#temporals.format(notice.updatedAt, 'yy/MM/dd HH:mm')}"></span>
                    <span th:if="${#temporals.format(notice.createdAt, 'yyyy-MM-dd HH:mm')
                     != #temporals.format(notice.updatedAt, 'yyyy-MM-dd HH:mm')}">(수정됨)</span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</body>
</html>